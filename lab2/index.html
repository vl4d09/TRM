<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Journey Through Time - AR Experience</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar-nft.js"></script>
    
    <style>
        body { margin: 0; overflow: hidden; font-family: Arial, sans-serif; }
        
        .ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.8) 100%);
            color: white;
            padding: 15px;
            z-index: 1000;
            text-align: center;
            font-size: 14px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        
        .status {
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: #FFD700;
            padding: 12px 24px;
            border-radius: 25px;
            z-index: 1000;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); }
            50% { box-shadow: 0 4px 25px rgba(255, 215, 0, 0.6); }
        }

        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 90%;
        }
        
        .btn {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: black;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        .btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #FFA500 0%, #FF8C00 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .btn:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn:disabled {
            background: #666;
            color: #999;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .progress {
            position: fixed;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .progress-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: #FFD700;
            box-shadow: 0 0 15px #FFD700;
        }
    </style>
</head>
<body>
    <div class="ui-overlay">
        <div style="font-size: 18px; margin-bottom: 5px;">‚è≥ <strong>Journey Through Time</strong></div>
        <div>Travel through history: <strong>Ancient Egypt üèúÔ∏è ‚Üí Modern New York üèôÔ∏è ‚Üí Future Mars üöÄ</strong></div>
    </div>

    <div id="status" class="status">‚è≥ Begin your journey in Ancient Egypt...</div>
    
    <div class="progress">
        <div class="progress-dot" id="dot1" title="Ancient Egypt"></div>
        <div class="progress-dot" id="dot2" title="Modern New York"></div>
        <div class="progress-dot" id="dot3" title="Future Mars"></div>
    </div>

    <div class="controls">
        <button id="btn-color" class="btn" disabled>üé® Change Color</button>
        <button id="btn-scale" class="btn" disabled>üìè Toggle Size</button>
        <button id="btn-animate" class="btn" disabled>‚ö° Toggle Animation</button>
        <button id="btn-reset" class="btn">üîÑ Reset Journey</button>
    </div>

    <a-scene
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        vr-mode-ui="enabled: false;">

        <a-assets>
            <!-- 3D Models for different eras -->
            <a-asset-item id="airplane" src="https://cdn.aframe.io/360-image-gallery-boilerplate/models/airplane/airplane.gltf"></a-asset-item>
            <a-asset-item id="duck" src="https://cdn.aframe.io/examples/ar/models/duck/duck.gltf"></a-asset-item>
        </a-assets>

        <!-- Scene 1: Ancient Egypt (3000 BC) -->
        <a-nft
            id="marker1"
            type="nft"
            url="marker1"
            smooth="true"
            smoothCount="10"
            smoothTolerance=".01"
            smoothThreshold="5">
            
            <a-entity
                id="model1"
                gltf-model="#airplane"
                position="0 100 0"
                scale="100 100 100"
                rotation="0 0 0"
                material="color: #D4AF37"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear"
                animation__bob="property: position; to: 0 150 0; from: 0 100 0; loop: true; dur: 3000; dir: alternate; easing: easeInOutSine">
            </a-entity>

            <a-text
                value="ANCIENT EGYPT"
                position="0 240 0"
                scale="70 70 70"
                align="center"
                color="#FFD700"
                shader="flat">
            </a-text>

            <a-text
                value="3000 BC - The Age of Pyramids"
                position="0 190 0"
                scale="45 45 45"
                align="center"
                color="#D4AF37"
                shader="flat">
            </a-text>

            <a-text
                value="Scan New York marker to travel forward in time"
                position="0 150 0"
                scale="35 35 35"
                align="center"
                color="#FFFFFF"
                shader="flat">
            </a-text>
        </a-nft>

        <!-- Scene 2: Modern New York (2024 AD) -->
        <a-nft
            id="marker2"
            type="nft"
            url="marker2"
            smooth="true"
            smoothCount="10"
            smoothTolerance=".01"
            smoothThreshold="5">
            
            <a-entity id="scene2" visible="false">
                <a-entity
                    id="model2"
                    gltf-model="#duck"
                    position="0 100 0"
                    scale="200 200 200"
                    rotation="0 0 0"
                    material="color: #00CED1"
                    animation="property: position; to: 0 160 0; from: 0 100 0; loop: true; dur: 2500; dir: alternate; easing: easeInOutQuad"
                    animation__spin="property: rotation; to: 0 360 0; loop: true; dur: 4000; easing: linear">
                </a-entity>

                <a-text
                    value="MODERN NEW YORK"
                    position="0 290 0"
                    scale="75 75 75"
                    align="center"
                    color="#00CED1"
                    shader="flat">
                </a-text>

                <a-text
                    value="2024 AD - The Age of Technology"
                    position="0 240 0"
                    scale="50 50 50"
                    align="center"
                    color="#1E90FF"
                    shader="flat">
                </a-text>

                <a-text
                    value="Scan Mars marker to journey to the future"
                    position="0 200 0"
                    scale="38 38 38"
                    align="center"
                    color="#FFFFFF"
                    shader="flat">
                </a-text>
            </a-entity>
        </a-nft>

        <!-- Scene 3: Future Mars (3024 AD) -->
        <a-nft
            id="marker3"
            type="nft"
            url="marker3"
            smooth="true"
            smoothCount="10"
            smoothTolerance=".01"
            smoothThreshold="5">
            
            <a-entity id="scene3" visible="false">
                <a-entity
                    id="model3a"
                    gltf-model="#airplane"
                    position="-120 120 0"
                    scale="90 90 90"
                    material="color: #FF4500"
                    animation="property: rotation; to: 0 -360 0; loop: true; dur: 3000; easing: linear"
                    animation__bob="property: position; to: -120 180 0; from: -120 120 0; loop: true; dur: 2000; dir: alternate">
                </a-entity>

                <a-entity
                    id="model3b"
                    gltf-model="#duck"
                    position="120 120 0"
                    scale="180 180 180"
                    material="color: #FF6347"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 3500; easing: linear"
                    animation__bob="property: position; to: 120 180 0; from: 120 120 0; loop: true; dur: 2500; dir: alternate; delay: 500">
                </a-entity>

                <a-entity position="0 320 0">
                    <a-text
                        value="FUTURE MARS COLONY"
                        position="0 0 0"
                        scale="85 85 85"
                        align="center"
                        color="#FF4500"
                        shader="flat">
                    </a-text>
                    <a-text
                        value="3024 AD - The Age of Exploration"
                        position="0 -50 0"
                        scale="55 55 55"
                        align="center"
                        color="#FF6347"
                        shader="flat">
                    </a-text>
                    <a-text
                        value="Journey Complete!"
                        position="0 -100 0"
                        scale="60 60 60"
                        align="center"
                        color="#FFD700"
                        shader="flat"
                        animation="property: scale; to: 70 70 70; from: 60 60 60; loop: true; dur: 1000; dir: alternate; easing: easeInOutSine">
                    </a-text>
                </a-entity>
            </a-entity>
        </a-nft>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        const gameState = {
            egyptScanned: false,
            newYorkScanned: false,
            marsScanned: false,
            currentEra: null
        };

        // Thematic colors for each era
        const egyptColors = ['#FFD700', '#D4AF37', '#CD853F', '#DAA520', '#B8860B'];
        const newYorkColors = ['#00CED1', '#1E90FF', '#4169E1', '#00BFFF', '#87CEEB'];
        const marsColors = ['#FF4500', '#FF6347', '#DC143C', '#B22222', '#8B0000'];
        
        let colorIndex = 0;
        let scaleToggle = false;
        let animationPaused = false;

        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚è≥ Journey Through Time AR Experience initializing...');
            
            const statusDiv = document.getElementById('status');
            const btnColor = document.getElementById('btn-color');
            const btnScale = document.getElementById('btn-scale');
            const btnAnimate = document.getElementById('btn-animate');
            const btnReset = document.getElementById('btn-reset');
            
            const marker1 = document.getElementById('marker1');
            const marker2 = document.getElementById('marker2');
            const marker3 = document.getElementById('marker3');

            const model1 = document.getElementById('model1');
            const scene2 = document.getElementById('scene2');
            const model2 = document.getElementById('model2');
            const scene3 = document.getElementById('scene3');
            const model3a = document.getElementById('model3a');
            const model3b = document.getElementById('model3b');

            const dot1 = document.getElementById('dot1');
            const dot2 = document.getElementById('dot2');
            const dot3 = document.getElementById('dot3');

            function updateStatus(message) {
                statusDiv.textContent = message;
                console.log('üìä', message);
            }

            function updateProgress() {
                dot1.classList.toggle('active', gameState.egyptScanned);
                dot2.classList.toggle('active', gameState.newYorkScanned);
                dot3.classList.toggle('active', gameState.marsScanned);
            }

            // MARKER 1: Ancient Egypt
            marker1.addEventListener('markerFound', function() {
                console.log('‚úÖ Ancient Egypt marker found!');
                gameState.egyptScanned = true;
                gameState.currentEra = 'egypt';
                updateStatus('üèúÔ∏è Welcome to Ancient Egypt! Scan New York to continue through time...');
                updateProgress();
                btnColor.disabled = false;
                btnScale.disabled = false;
                btnAnimate.disabled = false;
                
                // Unlock New York scene
                scene2.setAttribute('visible', true);
            });

            marker1.addEventListener('markerLost', function() {
                console.log('‚ùå Ancient Egypt marker lost');
                if (gameState.currentEra === 'egypt') {
                    btnColor.disabled = true;
                    btnScale.disabled = true;
                    btnAnimate.disabled = true;
                }
            });

            // MARKER 2: Modern New York
            marker2.addEventListener('markerFound', function() {
                if (!gameState.egyptScanned) {
                    updateStatus('üîí You must start from Ancient Egypt first!');
                    return;
                }
                
                console.log('‚úÖ New York marker found!');
                gameState.newYorkScanned = true;
                gameState.currentEra = 'newyork';
                updateStatus('üèôÔ∏è Welcome to Modern New York! Scan Mars to journey to the future...');
                updateProgress();
                btnColor.disabled = false;
                btnScale.disabled = false;
                btnAnimate.disabled = false;
                
                // Unlock Mars scene
                scene3.setAttribute('visible', true);
            });

            marker2.addEventListener('markerLost', function() {
                console.log('‚ùå New York marker lost');
                if (gameState.currentEra === 'newyork') {
                    btnColor.disabled = true;
                    btnScale.disabled = true;
                    btnAnimate.disabled = true;
                }
            });

            // MARKER 3: Future Mars
            marker3.addEventListener('markerFound', function() {
                if (!gameState.newYorkScanned) {
                    updateStatus('üîí Follow the timeline! Visit Ancient Egypt and New York first...');
                    return;
                }
                
                console.log('‚úÖ Mars marker found!');
                gameState.marsScanned = true;
                gameState.currentEra = 'mars';
                updateStatus('üöÄ Welcome to Mars Colony 3024! Your journey through time is complete!');
                updateProgress();
                btnColor.disabled = false;
                btnScale.disabled = false;
                btnAnimate.disabled = false;
            });

            marker3.addEventListener('markerLost', function() {
                console.log('‚ùå Mars marker lost');
                if (gameState.currentEra === 'mars') {
                    btnColor.disabled = true;
                    btnScale.disabled = true;
                    btnAnimate.disabled = true;
                }
            });

            // INTERACTION: Change color (thematic to each era)
            btnColor.addEventListener('click', function() {
                colorIndex = (colorIndex + 1) % 5;
                let newColor;
                
                switch(gameState.currentEra) {
                    case 'egypt':
                        newColor = egyptColors[colorIndex];
                        model1.setAttribute('material', 'color', newColor);
                        break;
                    case 'newyork':
                        newColor = newYorkColors[colorIndex];
                        model2.setAttribute('material', 'color', newColor);
                        break;
                    case 'mars':
                        newColor = marsColors[colorIndex];
                        model3a.setAttribute('material', 'color', newColor);
                        model3b.setAttribute('material', 'color', marsColors[(colorIndex + 2) % 5]);
                        break;
                }
                
                console.log('üé® Era color changed to:', newColor);
            });

            // INTERACTION: Toggle scale
            btnScale.addEventListener('click', function() {
                scaleToggle = !scaleToggle;
                
                switch(gameState.currentEra) {
                    case 'egypt':
                        model1.setAttribute('scale', scaleToggle ? '150 150 150' : '100 100 100');
                        break;
                    case 'newyork':
                        model2.setAttribute('scale', scaleToggle ? '300 300 300' : '200 200 200');
                        break;
                    case 'mars':
                        model3a.setAttribute('scale', scaleToggle ? '130 130 130' : '90 90 90');
                        model3b.setAttribute('scale', scaleToggle ? '250 250 250' : '180 180 180');
                        break;
                }
                
                console.log('üìè Scale toggled:', scaleToggle ? 'Larger' : 'Normal');
            });

            // INTERACTION: Toggle animation
            btnAnimate.addEventListener('click', function() {
                animationPaused = !animationPaused;
                const pauseValue = animationPaused ? 'paused' : 'running';
                btnAnimate.textContent = animationPaused ? '‚ñ∂Ô∏è Play Animation' : '‚è∏Ô∏è Pause Animation';
                
                switch(gameState.currentEra) {
                    case 'egypt':
                        model1.setAttribute('animation', 'pauseEvents', pauseValue);
                        model1.setAttribute('animation__bob', 'pauseEvents', pauseValue);
                        break;
                    case 'newyork':
                        model2.setAttribute('animation', 'pauseEvents', pauseValue);
                        model2.setAttribute('animation__spin', 'pauseEvents', pauseValue);
                        break;
                    case 'mars':
                        model3a.setAttribute('animation', 'pauseEvents', pauseValue);
                        model3a.setAttribute('animation__bob', 'pauseEvents', pauseValue);
                        model3b.setAttribute('animation', 'pauseEvents', pauseValue);
                        model3b.setAttribute('animation__bob', 'pauseEvents', pauseValue);
                        break;
                }
                
                console.log('‚ö° Animation:', animationPaused ? 'Paused' : 'Playing');
            });

            // INTERACTION: Reset journey
            btnReset.addEventListener('click', function() {
                gameState.egyptScanned = false;
                gameState.newYorkScanned = false;
                gameState.marsScanned = false;
                gameState.currentEra = null;
                
                scene2.setAttribute('visible', false);
                scene3.setAttribute('visible', false);
                
                updateStatus('üîÑ Journey reset! Begin again in Ancient Egypt...');
                updateProgress();
                btnColor.disabled = true;
                btnScale.disabled = true;
                btnAnimate.disabled = true;
                btnAnimate.textContent = '‚ö° Toggle Animation';
                animationPaused = false;
                colorIndex = 0;
                
                console.log('üîÑ Time journey reset to beginning');
            });
        });
    </script>
</body>
</html>